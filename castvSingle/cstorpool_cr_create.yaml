apiVersion: v1
kind: ConfigMap
metadata:
  name: cstor-pool-create-put-cr-0.6.0
  namespace: default
data:
  meta: |
    id: createputcstorpool
    runNamespace: {{ .Volume.runNamespace }}
    apiVersion: openebs.io/v1alpha1
    kind: CStorPool
    action: put
  post: |
    {{- jsonpath .JsonResult "{.metadata.name}" | trim | saveAs "createputcstorpool.objectName" .TaskResult | noop -}}
    {{- jsonpath .JsonResult "{.metadata.uid}" | trim | saveAs "createputcstorpool.uid" .TaskResult | noop -}}
  task: |
    apiVersion: openebs.io/v1alpha1
    kind: CStorPool
    metadata:
      name: {{.CstorPool.owner}}
      labels:
        cas.openebs.io/storage-pool-claim: {{.CstorPool.spc}}
        kubernetes.io/hostname: {{ .TaskResult.nodedisklist.hostname }}
    spec:
      disks:
        diskList: [ {{.TaskResult.nodedisklist.name}} ]
      poolSpec:
        poolType: {{.CstorPool.poolType}}
